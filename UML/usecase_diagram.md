# Случаи использования для KitchenMate
<img width="1223" height="626" alt="usecase_diagram" src="https://github.com/user-attachments/assets/a389c088-49dd-45ce-a4c5-9d7acd7ff4ed" />
## Актеры

- **Основной актер**: Пользователь (пользователь приложения, который управляет кладовой, ищет рецепты и генерирует списки покупок).
- **Вторичный актер**: Spoonacular API (внешняя система для поиска рецептов по ингредиентам).

## Обзор случаев использования

| ID случая | Название                  | Приоритет | Описание                                                                 |
|-----------|---------------------------|-----------|--------------------------------------------------------------------------|
| UC-01    | Управление кладовой       | Высокий  | Пользователь добавляет, редактирует или удаляет ингредиенты в виртуальной кладовой для отслеживания запасов. |
| UC-02    | Поиск рецептов            | Высокий  | Пользователь ищет рецепты на основе ингредиентов из кладовой через Spoonacular API. |
| UC-03    | Генерация списка покупок  | Средний  | Пользователь генерирует чек-лист недостающих ингредиентов для выбранного рецепта. |
| UC-04    | Управление рецептами      | Средний  | Пользователь добавляет кастомные рецепты, сохраняет в избранное или редактирует существующие. |
| UC-05    | Навигация по экранам      | Низкий   | Пользователь переходит между экранами приложения (кладовая, рецепты, покупки и т.д.) для удобной навигации. |

## Детальные случаи использования

### UC-01: Управление кладовой

**Описание**: Пользователь управляет виртуальной кладовой, добавляя продукты, редактируя их количество или удаляя, чтобы отслеживать доступные ингредиенты и минимизировать пищевые отходы.

**Акторы**: Пользователь

**Предусловия**: 
- Пользователь авторизован в приложении (если добавлена аутентификация).
- Экран "Кладовая" открыт.

**Постусловия**: 
- Кладовая обновлена в локальном хранилище.
- UI экрана отражает изменения (таблица с продуктами и количествами).

**Основной поток**:
1. Система отображает таблицу ингредиентов (название, количество, кнопки "Изменить" / "Удалить").
2. Если кладовая пуста, система показывает placeholder с кнопкой "Добавить".
3. Пользователь нажимает "Добавить" или "Изменить".
4. Система открывает форму: Название (input), Количество (input с единицами: шт/г/мл).
5. Пользователь заполняет форму и нажимает "Сохранить".
6. Система валидирует данные и сохраняет в хранилище, отображает уведомление "Добавлено!".
7. Для удаления: Пользователь нажимает "Удалить" → Диалог подтверждения → Система удаляет элемент.

**Альтернативные потоки**:
- A1: Автоматическое добавление из камеры (сканирование штрих-кода, если реализовано) → Переход к шагу 4 с предзаполненными данными.

**Исключения**:
- E1: Ошибка валидации (пустые поля) → Уведомление "Введите название и количество".
- E2: Ошибка хранения (оффлайн или квота) → Уведомление "Не удалось сохранить. Проверьте соединение".

### UC-02: Поиск рецептов

**Описание**: Пользователь вводит или выбирает ингредиенты из кладовой и получает рекомендации рецептов через Spoonacular API, с фильтрами по диете (для вегетарианцев и т.д.).

**Акторы**: Пользователь, Spoonacular API

**Предусловия**: 
- Кладовая содержит хотя бы один ингредиент.
- Интернет-соединение доступно для API-запроса.

**Постусловия**: 
- Список рецептов отображен на экране "Рецепты".
- Недостающие ингредиенты отмечены для потенциальной генерации покупок.

**Основной поток**:
1. Пользователь на главном экране вводит ингредиенты (multi-input) или выбирает из кладовой.
2. Пользователь нажимает "Найти рецепты".
3. Система отправляет запрос к Spoonacular API (/recipes/findByIngredients с параметрами ингредиентов, number=10).
4. Система отображает индикатор загрузки "Ищем рецепты...".
5. API возвращает результаты → Система показывает список карточек (название, ингредиенты: доступные/недостающие, время приготовления).
6. Пользователь выбирает карточку → Открывается детальный вид с инструкциями и фото.

**Альтернативные потоки**:
- A1: Применение фильтров (диета: вегетарианская) → Добавление параметров в API-запрос (diet=vegetarian).

**Исключения**:
- E1: Нет интернета или лимит API → Уведомление "Проверьте соединение. Покажем сохраненные рецепты".
- E2: Нулевые результаты → Предложение "Попробуйте другие ингредиенты" с подсказками из кладовой.

### UC-03: Генерация списка покупок

**Описание**: На основе выбранного рецепта пользователь генерирует список покупок для недостающих ингредиентов, чтобы упростить закупки и сэкономить время.

**Акторы**: Пользователь

**Предусловия**: 
- Рецепт выбран на экране "Рецепты" с выявленными недостающими ингредиентами.
- Экран "Список покупок" открыт.

**Постусловия**: 
- Список покупок обновлен и сохранен локально.
- Дубликаты ингредиентов слиты автоматически.

**Основной поток**:
1. Из детального вида рецепта пользователь нажимает "Добавить в покупки".
2. Система парсит недостающие ингредиенты из API-ответа и добавляет их в список (чекбоксы: товар, количество).
3. Система отображает экран "Список покупок" с возможностью ручного добавления (+ кнопка).
4. Пользователь отмечает чекбокс (куплено) → Элемент удаляется из списка и может добавляться в кладовую.
5. Пользователь нажимает "Поделиться" для экспорта списка (в заметки или мессенджер).

**Альтернативные потоки**:
- A1: Ручное добавление товара → Шаг 3 с вводом нового элемента.

**Исключения**:
- E1: Дубликаты в списке → Автоматическое слияние (например, "Мука 200г + 100г = 300г").
- E2: Пустой список → Уведомление "Нет покупок. Выберите рецепт для генерации".

### UC-04: Управление рецептами

**Описание**: Пользователь создает, сохраняет в избранное или редактирует рецепты, чтобы персонализировать контент и быстро возвращаться к любимым блюдам.

**Акторы**: Пользователь

**Предусловия**: 
- Экран "Избранные рецепты" или "Добавить рецепт" открыт.
- Для редактирования: Рецепт уже сохранен.

**Постусловия**: 
- Рецепт добавлен/обновлен в локальном хранилище.
- Изменения отражены в списке избранного.

**Основной поток**:
1. Пользователь нажимает "Добавить рецепт" или сердечко на карточке (для избранного).
2. Система открывает форму: Название, Ингредиенты (список), Инструкции, Время, Фото (загрузка).
3. Пользователь заполняет форму и нажимает "Сохранить".
4. Система валидирует обязательные поля и сохраняет рецепт.
5. Уведомление "Рецепт сохранен!" → Добавление в избранное.
6. Для просмотра: Пользователь выбирает из сетки карточек → Детальный вид.

**Альтернативные потоки**:
- A1: Массовое добавление в избранное → Выбор нескольких рецептов из поиска.

**Исключения**:
- E1: Ошибка валидации (пустые поля) → Уведомление "Заполните название и инструкции".
- E2: Ошибка загрузки фото → Использование placeholder-изображения.

### UC-05: Навигация по экранам

**Описание**: Пользователь перемещается между экранами приложения через нижнюю навигационную панель для seamless опыта (от кладовой к рецептам и покупкам).

**Акторы**: Пользователь

**Предусловия**: 
- Приложение запущено.
- Пользователь на любом экране.

**Постусловия**: 
- Новый экран загружен без потери данных.
- Навигация история сохранена (back button).

**Основной поток**:
1. Система отображает bottom tab bar (Избранное, Кладовая, Рецепты, Покупки, Настройки).
2. Пользователь нажимает вкладку (например, "Рецепты").
3. Система переходит к выбранному экрану с анимацией (fade/slide).
4. Если экран требует данных (например, рецепты), система загружает их асинхронно.

**Альтернативные потоки**:
- A1: Глубокая навигация (из рецепта в покупки) → Автоматический переход без возврата к главному.

**Исключения**:
- E1: Ошибка загрузки экрана → Уведомление "Не удалось загрузить. Попробуйте снова".
- E2: Оффлайн-режим → Отображение кэшированных данных с индикатором.
